<!-- æ–‡ç« å†…å®¹å¸ƒå±€é¡µ -->
<!DOCTYPE html>
<html lang="en">
  <!-- head.htmlå­˜æ”¾é¡µé¢é€šç”¨çš„å…ƒæ•°æ®ã€cssã€jsç­‰é“¾æ¥èµ„æº -->
<head>
  <meta name="generator" content="Hugo 0.79.1" />
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>æ ‘è“æ´¾4Bä¸Šä½¿ç”¨Dockerå®‰è£…MySQL | Luyik754081's blog</title>
  <meta name="description" content="Loji44&#39;s Blog. Focus on Java, Linux, Golang, Git, Vim, Docker, etc." />
  <meta name="viewport" content="width=device-width" />
  <link href="/favicon.png" rel="icon" />
  <link rel="stylesheet" href="/static/css/github.css" />
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="stylesheet" href="/static/css/search.css" />

  <script src="//cdn.staticfile.org/jquery/1.11.3/jquery.min.js"></script>
  <script type="text/javascript" src="/static/js/is.min.js"></script>
  <script type="text/javascript" src="/static/js/main.js"></script>
  <script type="text/javascript" src="/static/js/search.js" defer="true"></script>
</head>
  <body>
    <div id="container">
      <!-- å…¨å±€é¡¶éƒ¨å¯¼èˆªæ  -->
<div class="header">
  <span class="title"><a href="/">Luyik754081's blog</a></span>
  
    
    
    &#47;&nbsp;<a class="extra" href="/about.html">About</a>
  
    
    
    &#47;&nbsp;<a class="extra" href="/tags.html">TAGS</a>
  
    
    
    &#47;&nbsp;<a class="extra" href="/search.html">ğŸ”SEARCH</a>
  
</div>
      <div class="site">
        <!-- postæ–‡ç« çš„æ ‡é¢˜éƒ¨åˆ† -->
<div id="page_header">
  <div id="page_title">
    <h1>æ ‘è“æ´¾4Bä¸Šä½¿ç”¨Dockerå®‰è£…MySQL</h1>
  </div>
  <div id="page_meta">
    <span class="page_meta_tags">
      &#91;&nbsp;
      
        <!-- '/'å’Œç©ºæ ¼è½¬æ¢æˆ'-'ã€tagè‹±æ–‡è½¬æ¢æˆå°å†™å­—æ¯ -->
        
        <a class="extra" href="/tags/æ ‘è“æ´¾.html">#æ ‘è“æ´¾</a>
      
        <!-- '/'å’Œç©ºæ ¼è½¬æ¢æˆ'-'ã€tagè‹±æ–‡è½¬æ¢æˆå°å†™å­—æ¯ -->
        
        <a class="extra" href="/tags/mysql.html">#MySQL</a>
      
        <!-- '/'å’Œç©ºæ ¼è½¬æ¢æˆ'-'ã€tagè‹±æ–‡è½¬æ¢æˆå°å†™å­—æ¯ -->
        
        <a class="extra" href="/tags/docker.html">#Docker</a>
      
      &nbsp;&#93;
    </span>
    <span class="page_meta_date">
        &#91;&nbsp;06 January 2022&nbsp;&#93;
    </span>
  </div>
</div>

        <div class="post">
          <p>æ ‘è“æ´¾4Bå±äºARMæ¶æ„ï¼Œæƒ³è¦åœ¨ä¸Šé¢å®‰è£…MySQLï¼Œå¿…é¡»é€‰æ‹©é€‚é…ARMå¹³å°çš„MySQL Dockeré•œåƒã€‚MySQLå®˜æ–¹å‡ºäº†ä¸€ä¸ªå¯ä»¥åœ¨ARMå¹³å°ä¸Šè¿è¡Œçš„é•œåƒï¼š<a href="https://registry.hub.docker.com/r/mysql/mysql-server" target="_blank">https://registry.hub.docker.com/r/mysql/mysql-server</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker pull mysql/mysql-server:8.0.27-aarch64
</code></pre></div></div>

<p>è¿™é‡Œä½¿ç”¨Docker-composeè¿è¡Œï¼Œç¼–è¾‘<code class="language-plaintext highlighter-rouge">docker-compose.yaml</code>å†…å®¹å¦‚ä¸‹ï¼š</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">mysql-server</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql/mysql-server:8.0.27-aarch64</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">mysql-server</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3306:3306"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">root_pass</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">/xxx/docker/volumes/mysql-server/data:/var/lib/mysql"</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
</code></pre></div></div>

<p>å¯åŠ¨MySQL dockerå®¹å™¨ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose up <span class="nt">-d</span> mysql-server
</code></pre></div></div>

<p>ä½¿ç”¨å‘½ä»¤<code class="language-plaintext highlighter-rouge">docker logs -f mysql-server</code>æŸ¥çœ‹MySQLæœåŠ¡å™¨æ—¥å¿—ï¼Œçœ‹åˆ°<code class="language-plaintext highlighter-rouge">ready for connections</code>å­—æ ·å°±è¯´æ˜æˆåŠŸè¿è¡Œèµ·æ¥äº†ã€‚MySQLé»˜è®¤ä»…æ”¯æŒæœ¬åœ°<code class="language-plaintext highlighter-rouge">localhost</code>è¿æ¥ï¼Œéœ€è¦è®¾ç½®MySQLå¼€å¯æ”¯æŒè¿œç¨‹è¿æ¥ï¼Œæ­¥éª¤å¦‚ä¸‹ã€‚</p>

<p>æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">docker exec -ti mysql-server bash</code>å‘½ä»¤è¿›å…¥MySQLå®¹å™¨ä¸­ï¼Œç„¶åä½¿ç”¨<code class="language-plaintext highlighter-rouge">mysql</code>å‘½ä»¤è¿æ¥MySQLï¼š<code class="language-plaintext highlighter-rouge">mysql -h localhost -P 3306 -u root -proot_pass</code>ã€‚æˆåŠŸè¿æ¥ä¸Šåï¼Œç»™rootç”¨æˆ·æˆæƒè¿œç¨‹è¿æ¥ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; USE mysql<span class="p">;</span>
Reading table information <span class="k">for </span>completion of table and column names
You can turn off this feature to get a quicker startup with <span class="nt">-A</span>

Database changed
mysql&gt; SELECT user, host FROM user<span class="p">;</span>
+------------------+-----------+
| user             | host      |
+------------------+-----------+
| healthchecker    | localhost |
| mysql.infoschema | localhost |
| mysql.session    | localhost |
| mysql.sys        | localhost |
| root             | localhost |
+------------------+-----------+
5 rows <span class="k">in </span><span class="nb">set</span> <span class="o">(</span>0.00 sec<span class="o">)</span>

mysql&gt; UPDATE user SET <span class="nv">host</span><span class="o">=</span><span class="s1">'%'</span> WHERE user <span class="o">=</span> <span class="s1">'root'</span><span class="p">;</span>
Query OK, 1 row affected <span class="o">(</span>0.02 sec<span class="o">)</span>

mysql&gt; SELECT user, host FROM user<span class="p">;</span>
+------------------+-----------+
| user             | host      |
+------------------+-----------+
| root             | %         |
| healthchecker    | localhost |
| mysql.infoschema | localhost |
| mysql.session    | localhost |
| mysql.sys        | localhost |
+------------------+-----------+
5 rows <span class="k">in </span><span class="nb">set</span> <span class="o">(</span>0.01 sec<span class="o">)</span>

mysql&gt; FLUSH PRIVILEGES<span class="p">;</span>
Query OK, 0 rows affected <span class="o">(</span>0.02 sec<span class="o">)</span>
</code></pre></div></div>

<p>æˆåŠŸæ‰§è¡Œ<code class="language-plaintext highlighter-rouge">UPDATE user SET host='%' WHERE user = 'root';</code>ä¹‹åè®°å¾—æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">FLUSH PRIVILEGES;</code>åˆ·æ–°æƒé™ï¼</p>

<p>MySQL8ä¹‹åï¼Œç”¨æˆ·ç®¡ç†å’Œæƒé™ç®¡ç†è·Ÿä¹‹å‰ç‰ˆæœ¬å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œå‚è€ƒå®˜æ–¹è¯´æ˜ï¼š<a href="https://dev.mysql.com/doc/refman/8.0/en/grant.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/grant.html</a></p>

<hr />

<p>å‚è€ƒï¼š</p>

<ul>
  <li><a href="https://dev.mysql.com/doc/refman/8.0/en/grant.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/grant.html</a></li>
  <li><a href="https://www.cnblogs.com/dongxt/p/14883465.html" target="_blank">MySQL8.0ä»¥ä¸Šç‰ˆæœ¬åˆ›å»ºç”¨æˆ·å¹¶æˆæƒè¿œç¨‹è¿æ¥</a></li>
</ul>


        </div>
      </div>
    </div>
  </body>
  <div class="footer">
  <p>Copyright Â© 2021-2023&nbsp;|&nbsp;Powered by <a href="http://jekyllcn.com" target="_blank">Jekyll</a>. Theme by <a href="https://github.com/loji44/ExSimple" target="_blank">ExSimple</a>.</p>
</div>
</html>